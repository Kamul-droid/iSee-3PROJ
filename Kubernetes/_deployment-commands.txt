docker volume create nfs-exports

docker run -v nfs-exports:/exports -d --cap-add SYS_MODULE --name nfs --privileged cpuguy83/nfs-server /exports/nfs

kubectl delete deployment isee-nginx
kubectl delete deployment isee-backend
kubectl delete persistentvolumeclaim --all

kubectl apply -f mongodb-sc.yaml 
kubectl apply -f mongodb-secret.yaml
kubectl apply -f mongodb.yaml 

kubectl apply -f backend-secret.yaml 
kubectl apply -f backend-configmap.yaml 
kubectl apply -f backend.yaml

kubectl apply -f nginx-configmap.yaml
kubectl apply -f nginx.yaml 

kubectl exec -it isee-mongodb-0 mongosh
rs.initiate(
   {
      _id: "MainReplicaSet",
      members: [
         { _id: 0, host : "isee-mongodb-0.mongodb-headless-service.default.svc.cluster.local:27017" },
         { _id: 1, host : "isee-mongodb-1.mongodb-headless-service.default.svc.cluster.local:27017" },
         { _id: 2, host : "isee-mongodb-2.mongodb-headless-service.default.svc.cluster.local:27017" },
      ]
   }
)

kubectl exec -it isee-mongodb-X mongosh
> db.getMongo().setReadPref('primaryPreferred')